<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=1000, initial-scale=1">

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5W8DZRW');</script>
<!-- End Google Tag Manager -->

<link rel="dns-prefetch" href="http://fonts.googleapis.com/">
<link rel="dns-prefetch" href="http://fonts.gstatic.com/">
<link rel="dns-prefetch" href="http://resources.jetbrains.com/">


<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<link rel="Shortcut Icon" href="../../assets/images/favicon.ico" type="image/x-icon"/>
<link rel="apple-touch-icon" href="http://www.kotlincn.net/assets/images/apple-touch-icon.png"/>
<link rel="apple-touch-icon" sizes="72x72"
      href="http://www.kotlincn.net/assets/images/apple-touch-icon-72x72.png"/>
<link rel="apple-touch-icon" sizes="114x114"
      href="http://www.kotlincn.net/assets/images/apple-touch-icon-114x114.png"/>
<link rel="apple-touch-icon" sizes="144x144"
      href="http://www.kotlincn.net/assets/images/apple-touch-icon-144x144.png"/>

<!-- Social Media tag Starts -->
<!-- Place this data between the <head> tags of your website -->
<!-- Open Graph data -->
<meta property="og:title" content=""/>
<meta property="og:type" content="website"/>
<meta property="og:url" content="https://www.kotlincn.net/docs/reference/java-interop.html"/>
<meta property="og:image" content="https://www.kotlincn.net/assets/images/open-graph/kotlin_250x250.png"/>
    <meta property="og:description" content="">
<meta property="og:site_name" content="Kotlin"/>

<!-- Twitter Card data -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@kotlin">
<meta name="twitter:title" content="">
    <meta name="twitter:description" content="">
<meta name="twitter:image:src" content="https://www.kotlincn.net/assets/images/twitter-card/kotlin_800x320.png">
<!-- Social Media tag Ends -->


<link rel="stylesheet" href="../../_assets/styles.css?&amp;v=e44e3d4fd9246ec9985fe88b4baf2a72">    <link rel="stylesheet" href="../../_assets/reference.css?&amp;v=9377ef31169c8f79145bb4c173c29b34">


    <title>Kotlin 中调用 Java - Kotlin 语言中文站</title>

    <link rel="stylesheet" href="../../_assets/common.css?&amp;v=9e6fbfc1663315f135a0fd5e146c021a"/>
</head>
<body class=" page-old-styled ">
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5W8DZRW" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

<div class="global-layout">
    <div class="global-header-panel banner-nav">
        <div class="g-layout">
<div class="global-nav banner-container">
    <a class="banner-text" href="https://item.jd.com/12898592.html" target="_blank">
        <div class="banner-item title">
            新书上架：《深入理解Kotlin协程》（中文社区负责人霍丙乾著）
        </div>
        <div class="banner-item underline">
            立即购买
        </div>
    </a>
    <div class="close-head-banner"></div>
</div>        </div>
    </div>
<header class="global-header">
    <div class="global-header-panel">
        <div class="g-layout" data-nosnippet="true">
            <a class="global-header-logo" href="http://www.kotlincn.net/">Kotlin</a> <a href="https://github.com/JetBrains/kotlin/releases/tag/v1.3.72" target="_blank" class="global-header-logo__version">v1.3.72</a>
<nav class="global-nav">
    <div class="nav-links">
            <a href="https://www.kotliner.cn/" class="nav-item  nav-item-external" target="_blank" >
                博客
            </a>
            <a href="https://discuss.kotliner.cn/" class="nav-item  nav-item-external" target="_blank" >
                论坛
            </a>
            <a href="index.html" class="nav-item ">
                学习
            </a>
            <a href="http://www.kotlincn.net/community/" class="nav-item ">
                社区
            </a>
            <a href="http://www.kotlincn.net/education/" class="nav-item ">
                教学
            </a>
            <a href="https://play.kotlinlang.org" class="nav-item  nav-item-external" target="_blank" >
                演练
            </a>
    </div>
    <div class="search-button">
        <div class="icon"></div>
    </div>
</nav>        </div>
    </div>
</header>        <div class="g-layout global-content">
            <nav class="docs-nav-new">
                <div class="kto-tabs">
                        <a class="kto-tabs__item kto-tabs__item_active" href="index.html">语言指南</a>
                        <a class="kto-tabs__item" href="http://www.kotlincn.net/docs/tutorials/">教程</a>
                        <a class="kto-tabs__item" href="http://www.kotlincn.net/docs/books.html">图书</a>
                </div>
            </nav>

    <div class="g-grid">

        <aside class="g-3">
            <div class="js-side-tree-nav">
                    <nav class="side-tree-nav">
                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="概述">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">概述</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="server-overview.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Kotlin 用于服务器端开发</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="android-overview.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Kotlin 用于 Android 开发</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="js-overview.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Kotlin 用于 JavaScript 开发</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="native-overview.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Kotlin 用于原生开发</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="data-science-overview.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Kotlin 用于数据科学</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="coroutines-overview.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">协程</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="multiplatform.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">多平台</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="新特性">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">新特性</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="whatsnew13.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">1.3 的新特性</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="whatsnew12.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">1.2 的新特性</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="whatsnew11.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">1.1 的新特性</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="开始">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">开始</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="basic-syntax.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">基本语法</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="idioms.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">习惯用法</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="coding-conventions.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">编码规范</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="基础">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">基础</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="basic-types.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">基本类型</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="packages.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">包与导入</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="control-flow.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">控制流</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="returns.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">返回与跳转</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="类与对象">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">类与对象</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="classes.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">类与继承</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="properties.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">属性与字段</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="interfaces.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">接口</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="visibility-modifiers.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">可见性修饰符</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="extensions.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">扩展</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="data-classes.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">数据类</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="sealed-classes.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">密封类</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="generics.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">泛型</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="nested-classes.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">嵌套类</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="enum-classes.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">枚举类</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="object-declarations.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">对象</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="type-aliases.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">类型别名</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="inline-classes.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">内联类</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="delegation.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">委托</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="delegated-properties.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">委托属性</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="函数与 Lambda 表达式">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">函数与 Lambda 表达式</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="functions.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">函数</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="lambdas.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Lambda 表达式</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="inline-functions.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">内联函数</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="集合">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">集合</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="collections-overview.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">集合概述</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="constructing-collections.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">构造集合</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="iterators.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">迭代器</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="ranges.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">区间与数列</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="sequences.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">序列</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="collection-operations.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">操作概述</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="collection-transformations.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">转换</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="collection-filtering.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">过滤</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="collection-plus-minus.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">加减操作符</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="collection-grouping.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">分组</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="collection-parts.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">取集合的一部分</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="collection-elements.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">取单个元素</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="collection-ordering.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">排序</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="collection-aggregate.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">聚合操作</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="collection-write.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">集合写操作</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="list-operations.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">List 相关操作</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="set-operations.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Set 相关操作</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="map-operations.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Map 相关操作</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="协程">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">协程</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="coroutines/coroutines-guide.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">协程指南</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="coroutines/basics.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">基础</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="coroutines/cancellation-and-timeouts.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">取消与超时</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="coroutines/composing-suspending-functions.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">组合挂起函数</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="coroutines/coroutine-context-and-dispatchers.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">协程上下文与调度器</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="coroutines/flow.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">异步流</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="coroutines/channels.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">通道</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="coroutines/exception-handling.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">异常处理与监督</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="coroutines/shared-mutable-state-and-concurrency.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">共享的可变状态与并发</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="coroutines/select-expression.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Select 表达式（实验性的）</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="多平台程序设计">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">多平台程序设计</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="platform-specific-declarations.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">平台相关声明</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="building-mpp-with-gradle.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">以 Gradle 构建</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="mpp-dsl-reference.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">多平台 Gradle DSL 参考</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="更多语言结构">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">更多语言结构</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="multi-declarations.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">解构声明</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="typecasts.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">类型检测与转换</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="this-expressions.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">This 表达式</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="equality.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">相等性</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="operator-overloading.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">操作符重载</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="null-safety.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">空安全</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="exceptions.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">异常</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="annotations.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">注解</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="reflection.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">反射</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="scope-functions.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">作用域函数</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="type-safe-builders.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">类型安全的构建器</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="opt-in-requirements.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Opt-in Requirements</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="核心库">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">核心库</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="https://kotlinlang.org/api/latest/jvm/stdlib/index.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">标准库</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="https://kotlinlang.org/api/latest/kotlin.test/index.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">kotlin.test</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="参考">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">参考</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="keyword-reference.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">关键字与操作符</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="grammar.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">语法</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="code-style-migration-guide.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">编码风格约定</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="Java 互操作">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">Java 互操作</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <div class="tree-item-title tree-leaf-title js-item-title js-leaf-title is_active ">
                <div class="marker"></div>
                <div class="text">Kotlin 中调用 Java</div>
            </div>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="java-to-kotlin-interop.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Java 中调用 Kotlin</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="JavaScript">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">JavaScript</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="js-project-setup.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">搭建项目</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="dynamic-type.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">动态类型</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="js-interop.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Kotlin 中调用 JavaScript</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="js-to-kotlin-interop.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">JavaScript 中调用 Kotlin</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="js-modules.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">JavaScript 模块</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="js-reflection.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">JavaScript 反射</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="javascript-dce.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">JavaScript DCE</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="原生">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">原生</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="native/concurrency.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">并发</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="native/immutability.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">不可变性</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="native/libraries.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Kotlin 库</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="native/platform_libs.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">平台库</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="native/c_interop.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">与 C 语言互操作</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="native/objc_interop.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">与 Objective-C 及 Swift 互操作</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="native/cocoapods.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">CocoaPods 集成</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="native/gradle_plugin.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Gradle 插件</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="native/debugging.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">调试</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="native/faq.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">FAQ</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="工具">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">工具</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="using-gradle.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Gradle</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="using-maven.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Maven</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="using-ant.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Ant</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="compiler-reference.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">编译器选项</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="compiler-plugins.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">编译器插件</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="kapt.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Kapt</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="kotlin-doc.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Dokka</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="kotlin-osgi.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">OSGi</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="演进">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">演进</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="evolution/kotlin-evolution.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Kotlin 语言演进</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="evolution/components-stability.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">不同组件的稳定性</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="compatibility-guide-13.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">Kotlin 1.3 的兼容性指南</span>
            </a>
    </div>

    </div>

                <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="常见问题">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title is_active">
            <div class="marker"></div>
            <div class="text">常见问题</div>
        </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="faq.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">FAQ</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="comparison-to-java.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">与 Java 比较</span>
            </a>
    </div>

                    <div class="tree-item tree-leaf js-item js-leaf ">
            <a href="comparison-to-scala.html"
               class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
            >
                <span class="marker"></span>
                <span class="text">与 Scala 比较【官方已删除】</span>
            </a>
    </div>

    </div>

    </nav>


                <ul>
                  <li><a href="http://www.kotlincn.net/docs/kotlin-docs.pdf" class="reference-pdf-link">
                    <span class="icon"></span>
                    <span class="text">完整 Kotlin 参考（PDF）</span>
                  </a></li>
                  <li><a href="https://www.gitbook.com/download/pdf/book/hltj/kotlin-reference-chinese" class="reference-pdf-link">
                    <span class="icon"></span>
                    <span class="text">完整 Kotlin 参考（字大PDF）</span>
                  </a></li>
                  <li><a href="https://www.gitbook.com/download/epub/book/hltj/kotlin-reference-chinese" class="reference-pdf-link">
                    <span class="icon"></span>
                    <span class="text">完整 Kotlin 参考（ePUB）</span>
                  </a></li>
                  <li><a href="https://www.gitbook.com/download/mobi/book/hltj/kotlin-reference-chinese" class="reference-pdf-link">
                    <span class="icon"></span>
                    <span class="text">完整 Kotlin 参考（Mobi）</span>
                  </a></li>
                </ul>
            </div>
        </aside>

        <article role="main" class="page-content g-9">
<a href="https://github.com/hltj/kotlin-web-site-cn/edit/master/pages/docs/reference/java-interop.md"
   class="page-link-to-github"
   target="_blank"
   title="在 GitHub 上编辑本页">
        <i class="github-icon"></i>
        <span class="text">改进翻译</span>
</a>
                
<h1 class="typo-header typo-h1" id="在-kotlin-中调用-java-代码">在 Kotlin 中调用 Java 代码</h1>
<p class="typo-para">Kotlin 在设计时就考虑了 Java 互操作性。可以从 Kotlin 中自然地调用现存的 Java 代码，并且在 Java 代码中也可以<!--
-->很顺利地调用 Kotlin 代码。在本节中我们会介绍从 Kotlin 中调用 Java 代码的一些细节。</p>
<p class="typo-para">几乎所有 Java 代码都可以使用而没有任何问题：</p>
<div class="sample" data-highlight-only="" theme="idea">
<pre><code class="language-kotlin">import java.util.*

fun demo(source: List&lt;Int&gt;) {
    val list = ArrayList&lt;Int&gt;()
    // “for”-循环用于 Java 集合：
    for (item in source) {
        list.add(item)
    }
    // 操作符约定同样有效：
    for (i in 0..source.size - 1) {
        list[i] = source[i] // 调用 get 和 set
    }
}
</code></pre>
</div>
<h2 class="typo-header typo-h2" id="getter-和-setter">Getter 和 Setter</h2>
<p class="typo-para">遵循 Java 约定的 getter 和 setter 的方法（名称以 <code>get</code> 开头的无参数方法和以 <code>set</code> 开头的单参数方法）在 Kotlin 中表示为属性。
<code>Boolean</code> 访问器方法（其中 getter 的名称以 <code>is</code> 开头而 setter 的名称以 <code>set</code> 开头）<!--
-->会表示为与 getter 方法具有相同名称的属性。
例如：</p>
<div class="sample" data-highlight-only="" theme="idea">
<pre><code class="language-kotlin">import java.util.Calendar

fun calendarDemo() {
    val calendar = Calendar.getInstance()
    if (calendar.firstDayOfWeek == Calendar.SUNDAY) {  // 调用 getFirstDayOfWeek()
        calendar.firstDayOfWeek = Calendar.MONDAY      // 调用ll setFirstDayOfWeek()
    }
    if (!calendar.isLenient) {                         // 调用 isLenient()
        calendar.isLenient = true                      // 调用 setLenient()
    }
}
</code></pre>
</div>
<p class="typo-para">请注意，如果 Java 类只有一个 setter，它在 Kotlin 中不会作为属性可见，因为 Kotlin 目前不支持只写（set-only）属性。</p>
<h2 class="typo-header typo-h2" id="返回-void-的方法">返回 void 的方法</h2>
<p class="typo-para">如果一个 Java 方法返回 void，那么从 Kotlin 调用时中返回 <code>Unit</code>。
万一有人使用其返回值，它将由 Kotlin 编译器在调用处赋值，
因为该值本身是预先知道的（是 <code>Unit</code>）。</p>
<h2 class="typo-header typo-h2" id="将-kotlin-中是关键字的-java-标识符进行转义">将 Kotlin 中是关键字的 Java 标识符进行转义</h2>
<p class="typo-para">一些 Kotlin 关键字在 Java 中是有效标识符：<em class="keyword">in</em>、 <em class="keyword">object</em>、 <em class="keyword">is</em> 等等。
如果一个 Java 库使用了 Kotlin 关键字作为方法，你仍然可以通过反引号（`）字符转义它<!--
-->来调用该方法：</p>
<div class="sample" data-highlight-only="" theme="idea">
<pre><code class="language-kotlin">foo.`is`(bar)
</code></pre>
</div>
<h2 class="typo-header typo-h2" id="空安全与平台类型">空安全与平台类型</h2>
<p class="typo-para">Java 中的任何引用都可能是 <em class="keyword">null</em>，这使得 Kotlin 对来自 Java 的对象要求严格空安全是不现实的。
Java 声明的类型在 Kotlin 中会被特别对待并称为<em>平台类型</em>。对这种类型的空检测会放宽，
因此它们的安全保证与在 Java 中相同（更多请参见<a class="typo-link" href="java-interop.html#已映射类型">下文</a>）。</p>
<p class="typo-para">考虑以下示例：</p>
<div class="sample" data-highlight-only="" theme="idea">
<pre><code class="language-kotlin">val list = ArrayList&lt;String&gt;() // 非空（构造函数结果）
list.add("Item")
val size = list.size // 非空（原生 int）
val item = list[0] // 推断为平台类型（普通 Java 对象）
</code></pre>
</div>
<p class="typo-para">当我们调用平台类型变量的方法时，Kotlin 不会在编译时报告可空性错误，
但在运行时调用可能会失败，因为空指针异常或者 Kotlin 生成的<!--
-->阻止空值传播的断言：</p>
<div class="sample" data-highlight-only="" theme="idea">
<pre><code class="language-kotlin">item.substring(1) // 允许，如果 item == null 可能会抛出异常
</code></pre>
</div>
<p class="typo-para">平台类型是<em>不可标示</em>的，意味着不能在语言中明确地写下它们。
当把一个平台值赋值给一个 Kotlin 变量时，可以依赖类型推断（该变量会具有推断出的的平台类型，
如上例中 <code>item</code> 所具有的类型），或者我们可以选择我们期望的类型（可空或非空类型均可）：</p>
<div class="sample" data-highlight-only="" theme="idea">
<pre><code class="language-kotlin">val nullable: String? = item // 允许，没有问题
val notNull: String = item // 允许，运行时可能失败
</code></pre>
</div>
<p class="typo-para">如果我们选择非空类型，编译器会在赋值时触发一个断言。这防止 Kotlin 的非空变量保存<!--
-->空值。当我们把平台值传递给期待非空值等的 Kotlin 函数时，也会触发断言。
总的来说，编译器尽力阻止空值通过程序向远传播（尽管鉴于泛型的原因，有时这<!--
-->不可能完全消除）。</p>
<h3 class="typo-header typo-h3" id="平台类型表示法">平台类型表示法</h3>
<p class="typo-para">如上所述，平台类型不能在程序中显式表述，因此在语言中没有相应语法。
然而，编译器和 IDE 有时需要（在错误信息中、参数信息中等）显示他们，所以我们用<!--
-->一个助记符来表示他们：</p>
<ul class="typo-list typo-list_type_simple">
<li class="typo-list__item"><code>T!</code> 表示“<code>T</code> 或者 <code>T?</code>”，</li>
<li class="typo-list__item"><code>(Mutable)Collection&lt;T&gt;!</code> 表示“可以可变或不可变、可空或不可空的 <code>T</code> 的 Java 集合”，</li>
<li class="typo-list__item"><code>Array&lt;(out) T&gt;!</code> 表示“可空或者不可空的 <code>T</code>（或 <code>T</code> 的子类型）的 Java 数组”</li>
</ul>
<h3 class="typo-header typo-h3" id="可空性注解">可空性注解</h3>
<p class="typo-para">具有可空性注解的Java类型并不表示为平台类型，而是表示为实际可空或非空的
Kotlin 类型。编译器支持多种可空性注解，包括：</p>
<ul class="typo-list typo-list_type_simple">
<li class="typo-list__item"><a class="typo-link" href="https://www.jetbrains.com/idea/help/nullable-and-notnull-annotations.html">JetBrains</a>
（<code>org.jetbrains.annotations</code> 包中的  <code>@Nullable</code> 和 <code>@NotNull</code>）</li>
<li class="typo-list__item">Android（<code>com.android.annotations</code> 和 <code>android.support.annotations</code>)</li>
<li class="typo-list__item">JSR-305（<code>javax.annotation</code>，详见下文）</li>
<li class="typo-list__item">FindBugs（<code>edu.umd.cs.findbugs.annotations</code>）</li>
<li class="typo-list__item">Eclipse（<code>org.eclipse.jdt.annotation</code>）</li>
<li class="typo-list__item">Lombok（<code>lombok.NonNull</code>）。</li>
</ul>
<p class="typo-para">你可以在 <a class="typo-link" href="https://github.com/JetBrains/kotlin/blob/master/core/descriptor.loader.java/src/org/jetbrains/kotlin/load/java/JvmAnnotationNames.kt">Kotlin 编译器源代码</a>中找到完整的列表。</p>
<h3 class="typo-header typo-h3" id="注解类型参数">注解类型参数</h3>
<p class="typo-para">可以标注泛型类型的类型参数，以便同时为其提供可空性信息。例如，考虑这些 Java 声明的注解：</p>
<div class="sample" mode="java" theme="idea">
<pre><code class="language-java">@NotNull
Set&lt;@NotNull String&gt; toSet(@NotNull Collection&lt;@NotNull String&gt; elements) { …… }
</code></pre>
</div>
<p class="typo-para">在 Kotlin 中可见的是以下签名：</p>
<div class="sample" data-highlight-only="" theme="idea">
<pre><code class="language-kotlin">fun toSet(elements: (Mutable)Collection&lt;String&gt;) : (Mutable)Set&lt;String&gt; { …… }
</code></pre>
</div>
<p class="typo-para">请注意 <code>String</code> 类型参数上的 <code>@NotNull</code> 注解。如果没有的话，类型参数会是平台类型：</p>
<div class="sample" data-highlight-only="" theme="idea">
<pre><code class="language-kotlin">fun toSet(elements: (Mutable)Collection&lt;String!&gt;) : (Mutable)Set&lt;String!&gt; { …… }
</code></pre>
</div>
<p class="typo-para">标注类型参数适用于面向 Java 8 或更高版本环境，并且要求可空性注解支持 <code>TYPE_USE</code> 目标（<code>org.jetbrains.annotations</code> 15 或以上版本支持）。</p>
<blockquote class="note typo-quote">
<p class="typo-para">注：由于当前的技术限制，IDE 无法正确识别用作依赖的已编译 Java 库中类型参数上的这些注解。</p>
</blockquote>
<h3 class="typo-header typo-h3" id="jsr-305-支持">JSR-305 支持</h3>
<p class="typo-para">已支持 <a class="typo-link" href="https://jcp.org/en/jsr/detail?id=305">JSR-305</a> 中定义的 <a class="typo-link" href="https://aalmiray.github.io/jsr-305/apidocs/javax/annotation/Nonnull.html"><code>@Nonnull</code></a>
注解来表示 Java 类型的可空性。</p>
<p class="typo-para">如果 <code>@Nonnull(when = ...)</code> 值为 <code>When.ALWAYS</code>，那么该注解类型会被视为非空；<code>When.MAYBE</code> 与
<code>When.NEVER</code> 表示可空类型；而 <code>When.UNKNOWN</code> 强制类型为<a class="typo-link" href="java-interop.html#空安全与平台类型">平台类型</a>。</p>
<p class="typo-para">可针对 JSR-305 注解编译库，但不需要为库的消费者将注解构件（如 <code>jsr305.jar</code>）<!--
-->指定为编译依赖。Kotlin 编译器可以从库中读取 JSR-305 注解，并不需要该注解<!--
-->出现在类路径中。</p>
<p class="typo-para">自 Kotlin 1.1.50 起，
也支持<a class="typo-link" href="https://github.com/Kotlin/KEEP/blob/41091f1cc7045142181d8c89645059f4a15cc91a/proposals/jsr-305-custom-nullability-qualifiers.md">自定义可空限定符（KEEP-79）</a>
（见下文）。</p>
<h4 class="typo-header typo-h4" id="类型限定符别称自-1150-起">类型限定符别称（自 1.1.50 起）</h4>
<p class="typo-para">如果一个注解类型同时标注有
<a class="typo-link" href="https://aalmiray.github.io/jsr-305/apidocs/javax/annotation/meta/TypeQualifierNickname.html"><code>@TypeQualifierNickname</code></a>
与 JSR-305 <code>@Nonnull</code>（或者它的其他别称，如 <code>@CheckForNull</code>），那么该注解类型自身将用于
检索精确的可空性，且具有与该可空性注解相同的含义：</p>
<div class="sample" mode="java" theme="idea">
<pre><code class="language-java">@TypeQualifierNickname
@Nonnull(when = When.ALWAYS)
@Retention(RetentionPolicy.RUNTIME)
public @interface MyNonnull {
}

@TypeQualifierNickname
@CheckForNull // 另一个类型限定符别称的别称
@Retention(RetentionPolicy.RUNTIME)
public @interface MyNullable {
}

interface A {
    @MyNullable String foo(@MyNonnull String x);
    // 在 Kotlin（严格模式）中：`fun foo(x: String): String?`

    String bar(List&lt;@MyNonnull String&gt; x);
    // 在 Kotlin（严格模式）中：`fun bar(x: List&lt;String&gt;!): String!`
}
</code></pre>
</div>
<h4 class="typo-header typo-h4" id="类型限定符默认值自-1150-起">类型限定符默认值（自 1.1.50 起）</h4>
<p class="typo-para"><a class="typo-link" href="https://aalmiray.github.io/jsr-305/apidocs/javax/annotation/meta/TypeQualifierDefault.html"><code>@TypeQualifierDefault</code></a>
引入应用时在所标注元素的作用域内定义默认可空性的注解<!--
-->。</p>
<p class="typo-para">这些注解类型应自身同时标注有 <code>@Nonnull</code>（或其别称）与 <code>@TypeQualifierDefault(...)</code>注解，
后者带有一到多个 <code>ElementType</code> 值：</p>
<ul class="typo-list typo-list_type_simple">
<li class="typo-list__item"><code>ElementType.METHOD</code> 用于方法的返回值；</li>
<li class="typo-list__item"><code>ElementType.PARAMETER</code> 用于值参数；</li>
<li class="typo-list__item"><code>ElementType.FIELD</code> 用于字段；以及</li>
<li class="typo-list__item"><code>ElementType.TYPE_USE</code>（自 1.1.60 起）适用于任何类型，包括类型参数、类型参数的上界与通配符类型。</li>
</ul>
<p class="typo-para">当类型并未标注可空性注解时使用默认可空性，并且该默认值是<!--
-->由最内层标注有带有与所用类型相匹配的
<code>ElementType</code> 的类型限定符默认注解的元素确定。</p>
<div class="sample" mode="java" theme="idea">
<pre><code class="language-java">@Nonnull
@TypeQualifierDefault({ElementType.METHOD, ElementType.PARAMETER})
public @interface NonNullApi {
}

@Nonnull(when = When.MAYBE)
@TypeQualifierDefault({ElementType.METHOD, ElementType.PARAMETER, ElementType.TYPE_USE})
public @interface NullableApi {
}

@NullableApi
interface A {
    String foo(String x); // fun foo(x: String?): String?

    @NotNullApi // 覆盖来自接口的默认值
    String bar(String x, @Nullable String y); // fun bar(x: String, y: String?): String

    // 由于 `@NullableApi` 具有 `TYPE_USE` 元素类型，
    // 因此认为 List&lt;String&gt; 类型参数是可空的：
    String baz(List&lt;String&gt; x); // fun baz(List&lt;String?&gt;?): String?

    // “x”参数仍然是平台类型，因为有显式
    // UNKNOWN 标记的可空性注解：
    String qux(@Nonnull(when = When.UNKNOWN) String x); // fun baz(x: String!): String?
}
</code></pre>
</div>
<blockquote class="typo-quote">
<p class="typo-para">注意：本例中的类型只在启用了严格模式时出现，否则仍是平台类型。参见 <a class="typo-link" href="java-interop.html#undermigration-注解自-1160-起"><code>@UnderMigration</code> 注解</a>与<a class="typo-link" href="java-interop.html#编译器配置">编译器配置</a>两节。</p>
</blockquote>
<p class="typo-para">也支持包级的默认可空性：</p>
<div class="sample" mode="java" theme="idea">
<pre><code class="language-java">// 文件：test/package-info.java
@NonNullApi // 默认将“test”包中所有类型声明为不可空
package test;
</code></pre>
</div>
<h4 class="typo-header typo-h4" id="undermigration-注解自-1160-起"><code>@UnderMigration</code> 注解（自 1.1.60 起）</h4>
<p class="typo-para">库的维护者可以使用 <code>@UnderMigration</code> 注解（在单独的构件 <code>kotlin-annotations-jvm</code> 中提供）<!--
-->来定义可为空性类型限定符的迁移状态。</p>
<p class="typo-para"><code>@UnderMigration(status = ...)</code> 中的状态值指定了编译器如何处理 Kotlin 中注解类型的不当用法<!--
-->（例如，使用 <code>@MyNullable</code> 标注的类型值作为非空值）：</p>
<ul class="typo-list typo-list_type_simple">
<li class="typo-list__item">
<p class="typo-para"><code>MigrationStatus.STRICT</code> 使注解像任何纯可空性注解一样工作，即对<!--
-->不当用法报错并影响注解声明内的类型在 Kotlin 中的呈现；</p>
</li>
<li class="typo-list__item">
<p class="typo-para">对于 <code>MigrationStatus.WARN</code>，不当用法报为警告而不是错误；
但注解声明内的类型仍是平台类型；而</p>
</li>
<li class="typo-list__item">
<p class="typo-para"><code>MigrationStatus.IGNORE</code> 则使编译器完全忽略可空性注解。</p>
</li>
</ul>
<p class="typo-para">库的维护者还可以将 <code>@UnderMigration</code> 状态添加到类型限定符别称与类型限定符默认值：</p>
<div class="sample" mode="java" theme="idea">
<pre><code class="language-java">@Nonnull(when = When.ALWAYS)
@TypeQualifierDefault({ElementType.METHOD, ElementType.PARAMETER})
@UnderMigration(status = MigrationStatus.WARN)
public @interface NonNullApi {
}

// 类中的类型是非空的，但是只报警告
// 因为 `@NonNullApi` 标注了 `@UnderMigration(status = MigrationStatus.WARN)`
@NonNullApi
public class Test {}
</code></pre>
</div>
<p class="typo-para">注意：可空性注解的迁移状态并不会从其类型限定符别称继承，而是适用<!--
-->于默认类型限定符的用法。</p>
<p class="typo-para">如果默认类型限定符使用类型限定符别称，并且它们都标注有 <code>@UnderMigration</code>，那么<!--
-->使用默认类型限定符的状态。</p>
<h4 class="typo-header typo-h4" id="编译器配置">编译器配置</h4>
<p class="typo-para">可以通过添加带有以下选项的 <code>-Xjsr305</code> 编译器标志来配置 JSR-305 检测：</p>
<ul class="typo-list typo-list_type_simple">
<li class="typo-list__item">
<p class="typo-para"><code>-Xjsr305={strict|warn|ignore}</code> 设置非 <code>@UnderMigration</code> 注解的行为。
自定义的可空性限定符，尤其是
<code>@TypeQualifierDefault</code> 已经在很多知名库中流传，而用户<!--
-->更新到包含 JSR-305 支持的 Kotlin 版本时可能需要平滑迁移。自 Kotlin 1.1.60 起，这一标志只影响非 <code>@UnderMigration</code> 注解。</p>
</li>
<li class="typo-list__item">
<p class="typo-para"><code>-Xjsr305=under-migration:{strict|warn|ignore}</code>（自 1.1.60 起）覆盖 <code>@UnderMigration</code> 注解的行为。
用户可能对库的迁移状态有不同的看法：
他们可能希望在官方迁移状态为 <code>WARN</code> 时报错误，反之亦然，<!--
-->他们可能希望推迟错误报告直到他们完成迁移。</p>
</li>
<li class="typo-list__item">
<p class="typo-para"><code><a href="http://www.kotlincn.net/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="daf782b0a9a8e9eaefe79a">[email&#160;protected]</a>&lt;fq.name&gt;:{strict|warn|ignore}</code>（自 1.1.60 起）覆盖单个注解的行为，其中 <code>&lt;fq.name&gt;</code>是<!--
-->该注解的完整限定类名。对于不同的注解可以多次出现。这<!--
-->对于管理特定库的迁移状态非常有用。</p>
</li>
</ul>
<p class="typo-para">其中 <code>strict</code>、 <code>warn</code> 与 <code>ignore</code> 值的含义与 <code>MigrationStatus</code> 中的相同，并且只有 <code>strict</code> 模式会影响注解声明中的类型在 Kotlin 中的呈现。</p>
<blockquote class="typo-quote">
<p class="typo-para">注意：内置的 JSR-305 注解 <a class="typo-link" href="https://aalmiray.github.io/jsr-305/apidocs/javax/annotation/Nonnull.html"><code>@Nonnull</code></a>、 <a class="typo-link" href="https://aalmiray.github.io/jsr-305/apidocs/javax/annotation/Nullable.html"><code>@Nullable</code></a> 与 <a class="typo-link" href="https://aalmiray.github.io/jsr-305/apidocs/javax/annotation/CheckForNull.html"><code>@CheckForNull</code></a> 总是启用并影响所注解的声明在 Kotlin 中呈现，无论如何配置编译器的 <code>-Xjsr305</code> 标志。</p>
</blockquote>
<p class="typo-para">例如，将 <code>-Xjsr305=ignore -Xjsr305=under-migration:ignore <a href="http://www.kotlincn.net/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="123f4a7861602122272f527d60753c7e7b706073606b3c5f6b5c677e7e73707e77">[email&#160;protected]</a>:warn</code> 添加到<!--
-->编译器参数中，会使编译器对由
<code>@org.library.MyNullable</code> 标注的不当用法生成警告，而忽略所有其他 JSR-305 注解。</p>
<p class="typo-para">对于 kotlin 1.1.50+/1.2 版本，其默认行为等同于 <code>-Xjsr305=warn</code>。
<code>strict</code> 值应认为是实验性的（以后可能添加更多检测）。</p>
<h2 class="typo-header typo-h2" id="已映射类型">已映射类型</h2>
<p class="typo-para">Kotlin 特殊处理一部分 Java 类型。这样的类型不是“按原样”从 Java 加载，而是 <em>映射</em> 到相应的 Kotlin 类型。
映射只发生在编译期间，运行时表示保持不变。
Java 的原生类型映射到相应的 Kotlin 类型（请记住<a class="typo-link" href="java-interop.html#空安全与平台类型">平台类型</a>）：</p>
<table class="zebra typo-table">
<thead>
<tr class="typo-table__row">
<th><strong class="typo-strong">Java 类型</strong></th>
<th><strong class="typo-strong">Kotlin 类型</strong></th>
</tr>
</thead>
<tbody>
<tr class="typo-table__row">
<td class="typo-table__column"><code>byte</code></td>
<td class="typo-table__column"><code>kotlin.Byte</code></td>
</tr>
<tr class="typo-table__row">
<td class="typo-table__column"><code>short</code></td>
<td class="typo-table__column"><code>kotlin.Short</code></td>
</tr>
<tr class="typo-table__row">
<td class="typo-table__column"><code>int</code></td>
<td class="typo-table__column"><code>kotlin.Int</code></td>
</tr>
<tr class="typo-table__row">
<td class="typo-table__column"><code>long</code></td>
<td class="typo-table__column"><code>kotlin.Long</code></td>
</tr>
<tr class="typo-table__row">
<td class="typo-table__column"><code>char</code></td>
<td class="typo-table__column"><code>kotlin.Char</code></td>
</tr>
<tr class="typo-table__row">
<td class="typo-table__column"><code>float</code></td>
<td class="typo-table__column"><code>kotlin.Float</code></td>
</tr>
<tr class="typo-table__row">
<td class="typo-table__column"><code>double</code></td>
<td class="typo-table__column"><code>kotlin.Double</code></td>
</tr>
<tr class="typo-table__row">
<td class="typo-table__column"><code>boolean</code></td>
<td class="typo-table__column"><code>kotlin.Boolean</code></td>
</tr>
</tbody>
</table>
<p class="typo-para">一些非原生的内置类型也会作映射：</p>
<table class="zebra typo-table">
<thead>
<tr class="typo-table__row">
<th><strong class="typo-strong">Java 类型</strong></th>
<th><strong class="typo-strong">Kotlin 类型</strong></th>
</tr>
</thead>
<tbody>
<tr class="typo-table__row">
<td class="typo-table__column"><code>java.lang.Object</code></td>
<td class="typo-table__column"><code>kotlin.Any!</code></td>
</tr>
<tr class="typo-table__row">
<td class="typo-table__column"><code>java.lang.Cloneable</code></td>
<td class="typo-table__column"><code>kotlin.Cloneable!</code></td>
</tr>
<tr class="typo-table__row">
<td class="typo-table__column"><code>java.lang.Comparable</code></td>
<td class="typo-table__column"><code>kotlin.Comparable!</code></td>
</tr>
<tr class="typo-table__row">
<td class="typo-table__column"><code>java.lang.Enum</code></td>
<td class="typo-table__column"><code>kotlin.Enum!</code></td>
</tr>
<tr class="typo-table__row">
<td class="typo-table__column"><code>java.lang.Annotation</code></td>
<td class="typo-table__column"><code>kotlin.Annotation!</code></td>
</tr>
<tr class="typo-table__row">
<td class="typo-table__column"><code>java.lang.CharSequence</code></td>
<td class="typo-table__column"><code>kotlin.CharSequence!</code></td>
</tr>
<tr class="typo-table__row">
<td class="typo-table__column"><code>java.lang.String</code></td>
<td class="typo-table__column"><code>kotlin.String!</code></td>
</tr>
<tr class="typo-table__row">
<td class="typo-table__column"><code>java.lang.Number</code></td>
<td class="typo-table__column"><code>kotlin.Number!</code></td>
</tr>
<tr class="typo-table__row">
<td class="typo-table__column"><code>java.lang.Throwable</code></td>
<td class="typo-table__column"><code>kotlin.Throwable!</code></td>
</tr>
</tbody>
</table>
<p class="typo-para">Java 的装箱原始类型映射到可空的 Kotlin 类型：</p>
<table class="zebra typo-table">
<thead>
<tr class="typo-table__row">
<th><strong class="typo-strong">Java type</strong></th>
<th><strong class="typo-strong">Kotlin type</strong></th>
</tr>
</thead>
<tbody>
<tr class="typo-table__row">
<td class="typo-table__column"><code>java.lang.Byte</code></td>
<td class="typo-table__column"><code>kotlin.Byte?</code></td>
</tr>
<tr class="typo-table__row">
<td class="typo-table__column"><code>java.lang.Short</code></td>
<td class="typo-table__column"><code>kotlin.Short?</code></td>
</tr>
<tr class="typo-table__row">
<td class="typo-table__column"><code>java.lang.Integer</code></td>
<td class="typo-table__column"><code>kotlin.Int?</code></td>
</tr>
<tr class="typo-table__row">
<td class="typo-table__column"><code>java.lang.Long</code></td>
<td class="typo-table__column"><code>kotlin.Long?</code></td>
</tr>
<tr class="typo-table__row">
<td class="typo-table__column"><code>java.lang.Character</code></td>
<td class="typo-table__column"><code>kotlin.Char?</code></td>
</tr>
<tr class="typo-table__row">
<td class="typo-table__column"><code>java.lang.Float</code></td>
<td class="typo-table__column"><code>kotlin.Float?</code></td>
</tr>
<tr class="typo-table__row">
<td class="typo-table__column"><code>java.lang.Double</code></td>
<td class="typo-table__column"><code>kotlin.Double?</code></td>
</tr>
<tr class="typo-table__row">
<td class="typo-table__column"><code>java.lang.Boolean</code></td>
<td class="typo-table__column"><code>kotlin.Boolean?</code></td>
</tr>
</tbody>
</table>
<p class="typo-para">请注意，用作类型参数的装箱原始类型映射到平台类型：
例如，<code>List&lt;java.lang.Integer&gt;</code> 在 Kotlin 中会成为 <code>List&lt;Int!&gt;</code>。</p>
<p class="typo-para">集合类型在 Kotlin 中可以是只读的或可变的，因此 Java 集合类型作如下映射：
（下表中的所有 Kotlin 类型都驻留在 <code>kotlin.collections</code>包中）:</p>
<table class="zebra typo-table">
<thead>
<tr class="typo-table__row">
<th><strong class="typo-strong">Java 类型</strong></th>
<th><strong class="typo-strong">Kotlin 只读类型</strong></th>
<th><strong class="typo-strong">Kotlin 可变类型</strong></th>
<th><strong class="typo-strong">加载的平台类型</strong></th>
</tr>
</thead>
<tbody>
<tr class="typo-table__row">
<td class="typo-table__column"><code>Iterator&lt;T&gt;</code></td>
<td class="typo-table__column"><code>Iterator&lt;T&gt;</code></td>
<td class="typo-table__column"><code>MutableIterator&lt;T&gt;</code></td>
<td class="typo-table__column"><code>(Mutable)Iterator&lt;T&gt;!</code></td>
</tr>
<tr class="typo-table__row">
<td class="typo-table__column"><code>Iterable&lt;T&gt;</code></td>
<td class="typo-table__column"><code>Iterable&lt;T&gt;</code></td>
<td class="typo-table__column"><code>MutableIterable&lt;T&gt;</code></td>
<td class="typo-table__column"><code>(Mutable)Iterable&lt;T&gt;!</code></td>
</tr>
<tr class="typo-table__row">
<td class="typo-table__column"><code>Collection&lt;T&gt;</code></td>
<td class="typo-table__column"><code>Collection&lt;T&gt;</code></td>
<td class="typo-table__column"><code>MutableCollection&lt;T&gt;</code></td>
<td class="typo-table__column"><code>(Mutable)Collection&lt;T&gt;!</code></td>
</tr>
<tr class="typo-table__row">
<td class="typo-table__column"><code>Set&lt;T&gt;</code></td>
<td class="typo-table__column"><code>Set&lt;T&gt;</code></td>
<td class="typo-table__column"><code>MutableSet&lt;T&gt;</code></td>
<td class="typo-table__column"><code>(Mutable)Set&lt;T&gt;!</code></td>
</tr>
<tr class="typo-table__row">
<td class="typo-table__column"><code>List&lt;T&gt;</code></td>
<td class="typo-table__column"><code>List&lt;T&gt;</code></td>
<td class="typo-table__column"><code>MutableList&lt;T&gt;</code></td>
<td class="typo-table__column"><code>(Mutable)List&lt;T&gt;!</code></td>
</tr>
<tr class="typo-table__row">
<td class="typo-table__column"><code>ListIterator&lt;T&gt;</code></td>
<td class="typo-table__column"><code>ListIterator&lt;T&gt;</code></td>
<td class="typo-table__column"><code>MutableListIterator&lt;T&gt;</code></td>
<td class="typo-table__column"><code>(Mutable)ListIterator&lt;T&gt;!</code></td>
</tr>
<tr class="typo-table__row">
<td class="typo-table__column"><code>Map&lt;K, V&gt;</code></td>
<td class="typo-table__column"><code>Map&lt;K, V&gt;</code></td>
<td class="typo-table__column"><code>MutableMap&lt;K, V&gt;</code></td>
<td class="typo-table__column"><code>(Mutable)Map&lt;K, V&gt;!</code></td>
</tr>
<tr class="typo-table__row">
<td class="typo-table__column"><code>Map.Entry&lt;K, V&gt;</code></td>
<td class="typo-table__column"><code>Map.Entry&lt;K, V&gt;</code></td>
<td class="typo-table__column"><code>MutableMap.MutableEntry&lt;K,V&gt;</code></td>
<td class="typo-table__column"><code>(Mutable)Map.(Mutable)Entry&lt;K, V&gt;!</code></td>
</tr>
</tbody>
</table>
<p class="typo-para">Java 的数组按<a class="typo-link" href="java-interop.html#java-数组">下文</a>所述映射：</p>
<table class="zebra typo-table">
<thead>
<tr class="typo-table__row">
<th><strong class="typo-strong">Java 类型</strong></th>
<th><strong class="typo-strong">Kotlin 类型</strong></th>
</tr>
</thead>
<tbody>
<tr class="typo-table__row">
<td class="typo-table__column"><code>int[]</code></td>
<td class="typo-table__column"><code>kotlin.IntArray!</code></td>
</tr>
<tr class="typo-table__row">
<td class="typo-table__column"><code>String[]</code></td>
<td class="typo-table__column"><code>kotlin.Array&lt;(out) String&gt;!</code></td>
</tr>
</tbody>
</table>
<p class="typo-para">注意：这些 Java 类型的静态成员不能在相应 Kotlin 类型的<a class="typo-link" href="object-declarations.html#伴生对象">伴生对象</a>中直接访问。要调用它们，请使用 Java 类型的完整限定名，例如 <code>java.lang.Integer.toHexString(foo)</code>。</p>
<h2 class="typo-header typo-h2" id="kotlin-中的-java-泛型">Kotlin 中的 Java 泛型</h2>
<p class="typo-para">Kotlin 的泛型与 Java 有点不同（参见<a class="typo-link" href="generics.html">泛型</a>）。当将 Java 类型导入 Kotlin 时，我们会执行一些转换：</p>
<ul class="typo-list typo-list_type_simple">
<li class="typo-list__item">Java 的通配符转换成类型投影，
    <ul class="typo-list typo-list_type_simple">
<li class="typo-list__item"><code>Foo&lt;? extends Bar&gt;</code> 转换成 <code>Foo&lt;out Bar!&gt;!</code>，</li>
<li class="typo-list__item"><code>Foo&lt;? super Bar&gt;</code> 转换成 <code>Foo&lt;in Bar!&gt;!</code>；</li>
</ul>
</li>
<li class="typo-list__item">Java的原始类型转换成星投影，
    <ul class="typo-list typo-list_type_simple">
<li class="typo-list__item"><code>List</code> 转换成 <code>List&lt;*&gt;!</code>，即 <code>List&lt;out Any?&gt;!</code>。</li>
</ul>
</li>
</ul>
<p class="typo-para">和 Java 一样，Kotlin 在运行时不保留泛型，即对象不携带传递到他们构造器中的那些类型参数的实际类型。
即 <code>ArrayList&lt;Integer&gt;()</code> 和 <code>ArrayList&lt;Character&gt;()</code> 是不能区分的。
这使得执行 <em class="keyword">is</em>-检测不可能照顾到泛型。
Kotlin 只允许 <em class="keyword">is</em>-检测星投影的泛型类型：</p>
<div class="sample" data-highlight-only="" theme="idea">
<pre><code class="language-kotlin">if (a is List&lt;Int&gt;) // 错误：无法检测它是否真的是一个 Int 列表
// but
if (a is List&lt;*&gt;) // OK：不保证列表的内容
</code></pre>
</div>
<h3 class="typo-header typo-h3" id="java-数组">Java 数组</h3>
<p class="typo-para">与 Java 不同，Kotlin 中的数组是不型变的。这意味着 Kotlin 不允许我们把一个 <code>Array&lt;String&gt;</code> 赋值给一个 <code>Array&lt;Any&gt;</code>，
从而避免了可能的运行时故障。Kotlin 也禁止我们把一个子类的数组当做超类的数组传递给 Kotlin 的方法，
但是对于 Java 方法，这是允许的（通过 <code>Array&lt;(out) String&gt;!</code> 这种形式的<a class="typo-link" href="java-interop.html#空安全与平台类型">平台类型</a>）。</p>
<p class="typo-para">Java 平台上，数组会使用原生数据类型以避免装箱/拆箱操作的开销。
由于 Kotlin 隐藏了这些实现细节，因此需要一个变通方法来与 Java 代码进行交互。
对于每种原生类型的数组都有一个特化的类（<code>IntArray</code>、 <code>DoubleArray</code>、 <code>CharArray</code> 等等）来处理这种情况。
它们与 <code>Array</code> 类无关，并且会编译成 Java 原生类型数组以获得最佳性能。</p>
<p class="typo-para">假设有一个接受 int 数组索引的 Java 方法：</p>
<div class="sample" mode="java" theme="idea">
<pre><code class="language-java">public class JavaArrayExample {

    public void removeIndices(int[] indices) {
        // 在此编码……
    }
}
</code></pre>
</div>
<p class="typo-para">在 Kotlin 中你可以这样传递一个原生类型的数组：</p>
<div class="sample" data-highlight-only="" theme="idea">
<pre><code class="language-kotlin">val javaObj = JavaArrayExample()
val array = intArrayOf(0, 1, 2, 3)
javaObj.removeIndices(array)  // 将 int[] 传给方法
</code></pre>
</div>
<p class="typo-para">当编译为 JVM 字节代码时，编译器会优化对数组的访问，这样就不会引入任何开销：</p>
<div class="sample" data-highlight-only="" theme="idea">
<pre><code class="language-kotlin">val array = arrayOf(1, 2, 3, 4)
array[1] = array[1] * 2 // 不会实际生成对 get() 和 set() 的调用
for (x in array) { // 不会创建迭代器
    print(x)
}
</code></pre>
</div>
<p class="typo-para">即使当我们使用索引定位时，也不会引入任何开销：</p>
<div class="sample" data-highlight-only="" theme="idea">
<pre><code class="language-kotlin">for (i in array.indices) {// 不会创建迭代器
    array[i] += 2
}
</code></pre>
</div>
<p class="typo-para">最后，<em class="keyword">in</em>-检测也没有额外开销：</p>
<div class="sample" data-highlight-only="" theme="idea">
<pre><code class="language-kotlin">if (i in array.indices) { // 同 (i &gt;= 0 &amp;&amp; i &lt; array.size)
    print(array[i])
}
</code></pre>
</div>
<h2 class="typo-header typo-h2" id="java-可变参数">Java 可变参数</h2>
<p class="typo-para">Java 类有时声明一个具有可变数量参数（varargs）的方法来使用索引：</p>
<div class="sample" mode="java" theme="idea">
<pre><code class="language-java">public class JavaArrayExample {

    public void removeIndicesVarArg(int... indices) {
        // 在此编码……
    }
}
</code></pre>
</div>
<p class="typo-para">在这种情况下，你需要使用展开运算符 <code>*</code> 来传递 <code>IntArray</code>：</p>
<div class="sample" data-highlight-only="" theme="idea">
<pre><code class="language-kotlin">val javaObj = JavaArrayExample()
val array = intArrayOf(0, 1, 2, 3)
javaObj.removeIndicesVarArg(*array)
</code></pre>
</div>
<p class="typo-para">目前无法传递 <em class="keyword">null</em> 给一个声明为可变参数的方法。</p>
<h2 class="typo-header typo-h2" id="操作符">操作符</h2>
<p class="typo-para">由于 Java 无法标记用于运算符语法的方法，Kotlin 允许<!--
-->具有正确名称和签名的任何 Java 方法作为运算符重载和其他约定（<code>invoke()</code> 等）使用。
不允许使用中缀调用语法调用 Java 方法。</p>
<h2 class="typo-header typo-h2" id="受检异常">受检异常</h2>
<p class="typo-para">在 Kotlin 中，所有异常都是非受检的，这意味着编译器不会强迫你捕获其中的任何一个。
因此，当你调用一个声明受检异常的 Java 方法时，Kotlin 不会强迫你做任何事情：</p>
<div class="sample" data-highlight-only="" theme="idea">
<pre><code class="language-kotlin">fun render(list: List&lt;*&gt;, to: Appendable) {
    for (item in list) {
        to.append(item.toString()) // Java 会要求我们在这里捕获 IOException
    }
}
</code></pre>
</div>
<h2 class="typo-header typo-h2" id="对象方法">对象方法</h2>
<p class="typo-para">当 Java 类型导入到 Kotlin 中时，类型 <code>java.lang.Object</code> 的所有引用都成了 <code>Any</code>。
而因为 <code>Any</code> 不是平台指定的，它只声明了 <code>toString()</code>、<code>hashCode()</code> 和 <code>equals()</code> 作为其成员，
所以为了能用到 <code>java.lang.Object</code> 的其他成员，Kotlin 要用到<a class="typo-link" href="extensions.html">扩展函数</a>。</p>
<h3 class="typo-header typo-h3" id="waitnotify">wait()/notify()</h3>
<p class="typo-para">类型 <code>Any</code> 的引用没有提供 <code>wait()</code> 与 <code>notify()</code> 方法。通常不鼓励使用它们，而建议使用 <code>java.util.concurrent</code>。
如果确实需要调用这两个方法的话，那么可以将引用转换为 <code>java.lang.Object</code>：</p>
<div class="sample" data-highlight-only="" theme="idea">
<pre><code class="language-kotlin">(foo as java.lang.Object).wait()
</code></pre>
</div>
<h3 class="typo-header typo-h3" id="getclass">getClass()</h3>
<p class="typo-para">要取得对象的 Java 类，请在<a class="typo-link" href="reflection.html#类引用">类引用</a>上使用 <code>java</code> 扩展属性：</p>
<div class="sample" data-highlight-only="" theme="idea">
<pre><code class="language-kotlin">val fooClass = foo::class.java
</code></pre>
</div>
<p class="typo-para">上面的代码使用了自 Kotlin 1.1 起支持的<a class="typo-link" href="reflection.html#绑定的类引用自-11-起">绑定的类引用</a>。你也可以使用 <code>javaClass</code> 扩展属性：</p>
<div class="sample" data-highlight-only="" theme="idea">
<pre><code class="language-kotlin">val fooClass = foo.javaClass
</code></pre>
</div>
<h3 class="typo-header typo-h3" id="clone">clone()</h3>
<p class="typo-para">要覆盖 <code>clone()</code>，需要继承 <code>kotlin.Cloneable</code>：</p>
<div class="sample" data-highlight-only="" theme="idea">
<pre><code class="language-kotlin">class Example : Cloneable {
    override fun clone(): Any { …… }
}
</code></pre>
</div>
<p class="typo-para">不要忘记<a class="typo-link" href="http://www.oracle.com/technetwork/java/effectivejava-136174.html">《Effective Java》第三版</a> 的第 13 条: <em>谨慎地改写clone</em>。</p>
<h3 class="typo-header typo-h3" id="finalize">finalize()</h3>
<p class="typo-para">要覆盖 <code>finalize()</code>，所有你需要做的就是简单地声明它，而不需要 <em class="keyword">override</em> 关键字：</p>
<div class="sample" data-highlight-only="" theme="idea">
<pre><code class="language-kotlin">class C {
    protected fun finalize() {
        // 终止化逻辑
    }
}
</code></pre>
</div>
<p class="typo-para">根据 Java 的规则，<code>finalize()</code> 不能是 <em class="keyword">private</em> 的。</p>
<h2 class="typo-header typo-h2" id="从-java-类继承">从 Java 类继承</h2>
<p class="typo-para">在 kotlin 中，类的超类中最多只能有一个 Java 类（以及按你所需的多个 Java 接口）。</p>
<h2 class="typo-header typo-h2" id="访问静态成员">访问静态成员</h2>
<p class="typo-para">Java 类的静态成员会形成该类的“伴生对象”。我们无法将这样的“伴生对象”作为值来传递，
但可以显式访问其成员，例如：</p>
<div class="sample" data-highlight-only="" theme="idea">
<pre><code class="language-kotlin">if (Character.isLetter(a)) { …… }
</code></pre>
</div>
<p class="typo-para">要访问<a class="typo-link" href="java-interop.html#已映射类型">已映射</a>到 Kotlin 类型的 Java 类型的静态成员，请使用 Java 类型的完整限定名：<code>java.lang.Integer.bitCount(foo)</code>。</p>
<h2 class="typo-header typo-h2" id="java-反射">Java 反射</h2>
<p class="typo-para">Java 反射适用于 Kotlin 类，反之亦然。如上所述，你可以使用 <code>instance::class.java</code>,
<code>ClassName::class.java</code> 或者 <code>instance.javaClass</code> 通过 <code>java.lang.Class</code> 来进入 Java 反射。</p>
<p class="typo-para">其他支持的情况包括为一个 Kotlin 属性获取一个 Java 的 getter/setter 方法或者幕后字段、为一个 Java 字段获取一个 <code>KProperty</code>、为一个 <code>KFunction</code> 获取一个 Java 方法或者构造函数，反之亦然。</p>
<h2 class="typo-header typo-h2" id="sam-转换">SAM 转换</h2>
<p class="typo-para">就像 Java 8 一样，Kotlin 支持 SAM 转换。这意味着 Kotlin 函数字面值可以被自动的转换成<!--
-->只有一个非默认方法的 Java 接口的实现，只要这个方法的参数类型<!--
-->能够与这个 Kotlin 函数的参数类型相匹配。</p>
<p class="typo-para">你可以这样创建 SAM 接口的实例：</p>
<div class="sample" data-highlight-only="" theme="idea">
<pre><code class="language-kotlin">val runnable = Runnable { println("This runs in a runnable") }
</code></pre>
</div>
<p class="typo-para">……以及在方法调用中：</p>
<div class="sample" data-highlight-only="" theme="idea">
<pre><code class="language-kotlin">val executor = ThreadPoolExecutor()
// Java 签名：void execute(Runnable command)
executor.execute { println("This runs in a thread pool") }
</code></pre>
</div>
<p class="typo-para">如果 Java 类有多个接受函数式接口的方法，那么可以通过使用<!--
-->将 lambda 表达式转换为特定的 SAM 类型的适配器函数来选择需要调用的方法。这些适配器函数也会按需<!--
-->由编译器生成：</p>
<div class="sample" data-highlight-only="" theme="idea">
<pre><code class="language-kotlin">executor.execute(Runnable { println("This runs in a thread pool") })
</code></pre>
</div>
<p class="typo-para">请注意，SAM 转换只适用于接口，而不适用于抽象类，即使这些抽象类也只有一个<!--
-->抽象方法。</p>
<p class="typo-para">还要注意，此功能只适用于 Java 互操作；因为 Kotlin 具有合适的函数类型，所以不需要将函数自动转换<!--
-->为 Kotlin 接口的实现，因此不受支持。</p>
<h2 class="typo-header typo-h2" id="在-kotlin-中使用-jni">在 Kotlin 中使用 JNI</h2>
<p class="typo-para">要声明一个在本地（C 或 C++）代码中实现的函数，你需要使用 <code>external</code> 修饰符来标记它：</p>
<div class="sample" data-highlight-only="" theme="idea">
<pre><code class="language-kotlin">external fun foo(x: Int): Double
</code></pre>
</div>
<p class="typo-para">其余的过程与 Java 中的工作方式完全相同。</p>

        </article>
    </div>
        </div>
</div>

<footer role="contentinfo" class="global-footer">

    <div class="global-footer-terms">
        <div class="g-layout">
            <ul class="terms-social">
                <li class="terms-social__item terms-social__item_blog">
                    <a target="_blank" class="link" href="https://blog.jetbrains.com/kotlin/">博客</a>
                </li>
                <li class="terms-social__item terms-social__item_forum">
                    <a target="_blank" class="link" href="https://discuss.kotlinlang.org/">论坛</a>
                </li>
                <li class="terms-social__item terms-social__item_bug-tracker">
                    <a target="_blank" class="link" href="https://youtrack.jetbrains.com/issues/KT">问题跟踪</a>
                </li>
                <li class="terms-social__item terms-social__item_github">
                    <a target="_blank" class="link" href="https://github.com/JetBrains/kotlin">GitHub</a>
                </li>
                <li class="terms-social__item terms-social__item_twitter">
                    <a target="_blank" class="link" href="https://twitter.com/kotlin">Twitter</a>
                </li>
            </ul>
            <div class="global-footer-container">
                <div class="global-footer-row-left">
                        <p class="terms-para"><a class="terms-kit"
                              href="http://www.kotlincn.net/contribute.html">为 Kotlin 做贡献</a></p>
                    <p class="terms-para"><a class="terms-kit"
                                             href="http://www.kotlincn.net/eap/">抢先体验预览</a></p>
                    <p class="terms-para"><a class="terms-kit"
                                             href="http://www.kotlincn.net/security.html">安全性</a></p>
                        <p class="terms-para"><a class="terms-kit"
                              href="http://www.kotlincn.net/assets/kotlin-media-kit.pdf">宣传资料</a></p>
                    <div class="terms-copyright">
                        采用 <a href="https://github.com/JetBrains/kotlin-web-site/blob/master/LICENSE">Apache
                        2
                        授权许可</a>
                    </div>

                    <div class="terms-foundation">
                        Kotlin 商标受 <a
                            href="http://www.kotlincn.net/foundation/kotlin-foundation.html">Kotlin 基金会</a>保护
                    </div>
                </div>
                <div class="global-footer-row-right">
                    <div class="terms-sponsor">
                        Kotlin 语言与 Kotlin 官方英文站由 <a href="http://jetbrains.com" class="sponsor sponsor_jetbrains jetbrains-logo _logo-jetbrains"
                                                      target="_blank">JetBrains</a> 赞助及开发；
                    </div>
                    <div class="terms-sponsor">
                        本站由<a href="https://hltj.me/" class="testimonial-company-link" target="_blank" rel="nofollow">灰蓝天际</a>、
                        <a href="http://tanfujun.com" class="testimonial-company-link" target="_blank" rel="nofollow">晓_晨DEV</a>、
                        <a href="https://github.com/qiaoyuang" class="testimonial-company-link" target="_blank" rel="nofollow">乔禹昂</a>、
                        <a href="https://github.com/SpielbergGao" class="testimonial-company-link" target="_blank" rel="nofollow">高金龙</a>、
                        <a href="https://github.com/HoshinoTented" class="testimonial-company-link" target="_blank" rel="nofollow">HoshinoTented</a>、
                        <a href="https://www.liuwj.me" class="testimonial-company-link" target="_blank" rel="nofollow">刘文俊</a>、
                        <a href="https://github.com/Hiwensen" class="testimonial-company-link" target="_blank" rel="nofollow">常少威</a>、
                        <a href="https://github.com/Yue-plus" class="testimonial-company-link" target="_blank" rel="nofollow">Yue-plus</a>、
                        <a href="https://github.com/Guolianxing" class="testimonial-company-link" target="_blank" rel="nofollow">Guolianxing</a>
                        &nbsp;<a href="http://www.kotlincn.net/contribute.html#中文站翻译贡献者" class="testimonial-company-link" target="_blank" rel="nofollow">等</a>译
                    </div>
                </div>
            </div>
        </div>
    </div>

</footer><div class="search-popup _hidden" tabindex="1000">
    <div class="search-popup__content">
        <div class="search-popup__controls">
            <div class="search-popup__input"></div>
            <div class="search-popup__close">
                <div class="search-popup__close-icon-wrapper">
                    <div class="search-popup__close-icon"></div>
                </div>
                <div class="search-popup__close-text">esc</div>
            </div>
        </div>
        <div class="search-popup__results"></div>
    </div>
</div>
<script data-cfasync="false" src="../../cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script src="../../_assets/common.js?&amp;v=02aab4e0a4be79567299335059fe4adc"></script>
    <script src="../../_assets/reference.js?&amp;v=42db5638a201ca172b1b2d12bd88c10c"></script>
</body>
</html>